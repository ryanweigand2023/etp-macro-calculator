    @media (prefers-color-scheme: dark) {
        :root {
            --color-bg: #1a1a1a;
            --color-surface: #262626;
            --color-text: #f5f5f5;
            --color-text-secondary: #a3a3a3;
            --color-primary: #38bdf8;
            --color-primary-hover: #0ea5e9;
            --color-border: #404040;
        }
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: var(--color-bg);
        color: var(--color-text);
        line-height: 1.6;
        padding: 20px;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
    }

    header {
        text-align: center;
        margin-bottom: 40px;
    }

    h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        color: var(--color-primary);
    }

    .subtitle {
        color: var(--color-text-secondary);
        font-size: 1.1rem;
    }

    .card {
        background: var(--color-surface);
        border-radius: var(--radius);
        padding: 24px;
        margin-bottom: 24px;
        box-shadow: var(--shadow);
        border: 1px solid var(--color-border);
    }

    .card h2 {
        font-size: 1.5rem;
        margin-bottom: 20px;
        color: var(--color-primary);
    }

    .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }

    .form-group {
        display: flex;
        flex-direction: column;
    }

    label {
        font-weight: 600;
        margin-bottom: 8px;
        font-size: 0.9rem;
        color: var(--color-text);
    }

    input, select {
        padding: 12px;
        border: 2px solid var(--color-border);
        border-radius: var(--radius);
        font-size: 1rem;
        background: var(--color-surface);
        color: var(--color-text);
        transition: border-color 0.2s;
    }

    input:focus, select:focus {
        outline: none;
        border-color: var(--color-primary);
    }

    .radio-group {
        display: flex;
        gap: 16px;
        margin-top: 8px;
        flex-wrap: wrap;
    }

    .radio-option {
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
    }

    .radio-option input[type="radio"] {
        width: 20px;
        height: 20px;
        cursor: pointer;
    }

    button {
        background: var(--color-primary);
        color: white;
        border: none;
        padding: 14px 28px;
        font-size: 1rem;
        font-weight: 600;
        border-radius: var(--radius);
        cursor: pointer;
        transition: background 0.2s;
        width: 100%;
        margin-top: 10px;
    }

    button:hover {
        background: var(--color-primary-hover);
    }

    button:active {
        transform: scale(0.98);
    }

    .results {
        display: none;
    }

    .results.show {
        display: block;
    }

    .phase-tabs {
        display: flex;
        gap: 12px;
        margin-bottom: 24px;
        flex-wrap: wrap;
    }

    .phase-tab {
        padding: 10px 20px;
        background: var(--color-border);
        border: 2px solid var(--color-border);
        border-radius: var(--radius);
        cursor: pointer;
        font-weight: 600;
        transition: all 0.2s;
        flex: 1;
        min-width: 150px;
        text-align: center;
    }

    .phase-tab.active {
        background: var(--color-primary);
        color: white;
        border-color: var(--color-primary);
    }

    .phase-content {
        display: none;
    }

    .phase-content.active {
        display: block;
    }

    .summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        margin-top: 20px;
    }

    .summary-card {
        background: var(--color-border);
        padding: 16px;
        border-radius: var(--radius);
        text-align: center;
    }

    .summary-label {
        font-size: 0.85rem;
        color: var(--color-text-secondary);
        margin-bottom: 8px;
        text-transform: uppercase;
        font-weight: 600;
    }

    .summary-value {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--color-primary);
    }

    .info-box {
        background: var(--color-border);
        padding: 16px;
        border-radius: var(--radius);
        margin-top: 20px;
        border-left: 4px solid var(--color-primary);
    }

    .info-box h3 {
        margin-bottom: 8px;
        color: var(--color-primary);
    }

    .info-box p {
        margin-bottom: 8px;
        color: var(--color-text-secondary);
        font-size: 0.9rem;
    }

    .day-type {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        text-transform: uppercase;
    }

    .day-super { background: #fef3c7; color: #92400e; }
    .day-high { background: #dbeafe; color: #1e40af; }
    .day-medium { background: #d1fae5; color: #065f46; }
    .day-low { background: #fce7f3; color: #9f1239; }

    @media (prefers-color-scheme: dark) {
        .day-super { background: #78350f; color: #fef3c7; }
        .day-high { background: #1e3a8a; color: #dbeafe; }
        .day-medium { background: #064e3b; color: #d1fae5; }
        .day-low { background: #831843; color: #fce7f3; }
    }

    @media (max-width: 768px) {
        h1 { font-size: 2rem; }
        .phase-tabs { flex-direction: column; }
    }
</style>
</head> <body> <div class="container"> <header> <h1>üèãÔ∏è ETP Macro Calculator</h1> <p class="subtitle">Eat to Perform-Style Carb Cycling Plans</p> </header>
    <div class="card">
        <h2>Your Information</h2>
        <div class="form-grid">
            <div class="form-group">
                <label for="weight">Weight (lbs)</label>
                <input type="number" id="weight" value="275" min="100" max="500">
            </div>
            <div class="form-group">
                <label for="height">Height (inches)</label>
                <input type="number" id="height" value="70" min="48" max="96">
            </div>
            <div class="form-group">
                <label for="age">Age</label>
                <input type="number" id="age" value="33" min="18" max="100">
            </div>
            <div class="form-group">
                <label for="sex">Sex</label>
                <select id="sex">
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                </select>
            </div>
        </div>

        <div class="form-group" style="margin-bottom: 20px;">
            <label for="activity">Activity Level</label>
            <select id="activity">
                <option value="1.2">Sedentary (little/no exercise)</option>
                <option value="1.375">Lightly Active (1-3 days/week)</option>
                <option value="1.55">Moderately Active (3-5 days/week)</option>
                <option value="1.725" selected>Very Active (6-7 days/week)</option>
                <option value="1.9">Extremely Active (2x/day training)</option>
            </select>
        </div>

        <div class="form-group">
            <label>Beer Schedule</label>
            <div class="radio-group">
                <label class="radio-option">
                    <input type="radio" name="beer" value="current" checked>
                    <span>Current Schedule (Tue 2, Thu 2, Sun 3-4)</span>
                </label>
                <label class="radio-option">
                    <input type="radio" name="beer" value="sunday">
                    <span>Sunday Only (3-4 beers)</span>
                </label>
                <label class="radio-option">
                    <input type="radio" name="beer" value="none">
                    <span>No Beer</span>
                </label>
            </div>
        </div>

        <button onclick="calculateMacros()">Calculate My Macros</button>
    </div>

    <div id="results" class="results">
        <div class="card">
            <h2>Your Personalized Macros</h2>
            
            <div class="summary-grid">
                <div class="summary-card">
                    <div class="summary-label">TDEE</div>
                    <div class="summary-value" id="tdee-value">‚Äî</div>
                </div>
                <div class="summary-card">
                    <div class="summary-label">Daily Protein</div>
                    <div class="summary-value" id="protein-value">‚Äî</div>
                </div>
                <div class="summary-card">
                    <div class="summary-label">BMI</div>
                    <div class="summary-value" id="bmi-value">‚Äî</div>
                </div>
            </div>

            <div class="phase-tabs">
                <div class="phase-tab active" onclick="showPhase(event, 'pr')">Performance Recomp</div>
                <div class="phase-tab" onclick="showPhase(event, 'fl20')">Fat Loss 20%</div>
                <div class="phase-tab" onclick="showPhase(event, 'fl25')">Fat Loss 25%</div>
            </div>

            <div id="phase-pr" class="phase-content active">
                <div class="info-box">
                    <h3>Performance Recomp Phase</h3>
                    <p><strong>Goal:</strong> Maintain weight, build muscle, improve performance</p>
                    <p><strong>Daily Average:</strong> <span id="pr-avg">‚Äî</span> cal</p>
                    <p><strong>Relation to TDEE:</strong> <span id="pr-diff">‚Äî</span></p>
                </div>
                <div id="pr-table"></div>
            </div>

            <div id="phase-fl20" class="phase-content">
                <div class="info-box">
                    <h3>Fat Loss 20% Deficit</h3>
                    <p><strong>Goal:</strong> Sustainable fat loss</p>
                    <p><strong>Daily Average:</strong> <span id="fl20-avg">‚Äî</span> cal</p>
                    <p><strong>Deficit:</strong> <span id="fl20-deficit">‚Äî</span> cal/day</p>
                    <p><strong>Expected Loss:</strong> <span id="fl20-loss">‚Äî</span> lbs/week</p>
                    <p><strong>4-Week Mini Cut:</strong> ~<span id="fl20-4wk">‚Äî</span> lbs | <strong>6-Week Standard:</strong> ~<span id="fl20-6wk">‚Äî</span> lbs</p>
                </div>
                <div id="fl20-table"></div>
            </div>

            <div id="phase-fl25" class="phase-content">
                <div class="info-box">
                    <h3>Fat Loss 25% Deficit (Aggressive)</h3>
                    <p><strong>Goal:</strong> Faster fat loss</p>
                    <p><strong>Daily Average:</strong> <span id="fl25-avg">‚Äî</span> cal</p>
                    <p><strong>Deficit:</strong> <span id="fl25-deficit">‚Äî</span> cal/day</p>
                    <p><strong>Expected Loss:</strong> <span id="fl25-loss">‚Äî</span> lbs/week</p>
                    <p><strong>4-Week Mini Cut:</strong> ~<span id="fl25-4wk">‚Äî</span> lbs | <strong>6-Week Standard:</strong> ~<span id="fl25-6wk">‚Äî</span> lbs</p>
                </div>
                <div id="fl25-table"></div>
            </div>
        </div>

        <div class="card">
            <h2>ETP Day Structure</h2>
            <div class="info-box">
                <p><strong>Sunday:</strong> <span class="day-type day-super">Super</span> Higher Carb + Higher Fat</p>
                <p><strong>Monday:</strong> <span class="day-type day-low">Low</span> Lower Carb + Higher Fat</p>
                <p><strong>Tuesday:</strong> <span class="day-type day-high">High</span> Higher Carb + Lower Fat</p>
                <p><strong>Wednesday:</strong> <span class="day-type day-medium">Medium</span> Moderate Carb + Moderate Fat</p>
                <p><strong>Thursday:</strong> <span class="day-type day-medium">Medium</span> Moderate Carb + Moderate Fat</p>
                <p><strong>Friday:</strong> <span class="day-type day-low">Low</span> Lower Carb + Higher Fat</p>
                <p><strong>Saturday:</strong> <span class="day-type day-medium">Medium</span> Moderate Carb + Moderate Fat</p>
            </div>
        </div>
    </div>
</div>

<script>
    function showPhase(evt, phase) {
        document.querySelectorAll('.phase-tab').forEach(tab => tab.classList.remove('active'));
        document.querySelectorAll('.phase-content').forEach(content => content.classList.remove('active'));
        
        evt.target.classList.add('active');
        document.getElementById('phase-' + phase).classList.add('active');
    }

    function calculateMacros() {
        const weight = parseFloat(document.getElementById('weight').value);
        const height = parseFloat(document.getElementById('height').value);
        const age = parseFloat(document.getElementById('age').value);
        const sex = document.getElementById('sex').value;
        const activityMultiplier = parseFloat(document.getElementById('activity').value);
        const beerSchedule = document.querySelector('input[name="beer"]:checked').value;

        const weightKg = weight / 2.2;
        const heightCm = height * 2.54;

        let bmr;
        if (sex === 'male') {
            bmr = (10 * weightKg) + (6.25 * heightCm) - (5 * age) + 5;
        } else {
            bmr = (10 * weightKg) + (6.25 * heightCm) - (5 * age) - 161;
        }

        const tdee = Math.round(bmr * activityMultiplier);
        const protein = Math.round(weight * 0.9);
        const bmi = ((weight / (height * height)) * 703).toFixed(1);

        document.getElementById('tdee-value').textContent = tdee.toLocaleString();
        document.getElementById('protein-value').textContent = protein + 'g';
        document.getElementById('bmi-value').textContent = bmi;

        let beerCals = {};
        if (beerSchedule === 'current') {
            beerCals = {Sunday: 780, Tuesday: 450, Thursday: 450};
        } else if (beerSchedule === 'sunday') {
            beerCals = {Sunday: 780};
        }

        generatePhase('pr', tdee, protein, beerCals, 1.0);
        generatePhase('fl20', tdee, protein, beerCals, 0.8);
        generatePhase('fl25', tdee, protein, beerCals, 0.75);

        document.getElementById('results').classList.add('show');
        document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
    }

    function generatePhase(phaseId, tdee, protein, beerCals, targetMultiplier) {
        const targetCal = tdee * targetMultiplier;
        const proteinCal = protein * 4;

        const days = [
            {name: 'Sunday', type: 'Super'},
            {name: 'Monday', type: 'Low'},
            {name: 'Tuesday', type: 'High'},
            {name: 'Wednesday', type: 'Medium'},
            {name: 'Thursday', type: 'Medium'},
            {name: 'Friday', type: 'Low'},
            {name: 'Saturday', type: 'Medium'}
        ];

        let macros = [];
        let weeklyFood = 0;
        let weeklyBeer = 0;

        days.forEach(day => {
            let carbs, fat, beer = beerCals[day.name] || 0;
            
            if (phaseId === 'pr') {
                if (day.type === 'Super') {
                    carbs = Math.round(tdee * 0.13);
                    fat = Math.round(tdee * 0.03);
                } else if (day.type === 'Low') {
                    carbs = Math.round(targetCal * 0.08);
                    fat = Math.round(targetCal * 0.035);
                } else if (day.type === 'High') {
                    carbs = Math.round(targetCal * 0.125);
                    fat = Math.round(targetCal * 0.02);
                } else {
                    carbs = Math.round(targetCal * 0.10);
                    fat = Math.round(targetCal * 0.027);
                }
            } else if (phaseId === 'fl20') {
                if (day.type === 'Super') {
                    carbs = Math.round(targetCal * 0.125);
                    fat = Math.round(targetCal * 0.03);
                } else if (day.type === 'Low') {
                    carbs = Math.round(targetCal * 0.055);
                    fat = Math.round(targetCal * 0.034);
                } else if (day.type === 'High') {
                    carbs = Math.round(targetCal * 0.11);
                    fat = Math.round(targetCal * 0.018);
                } else {
                    carbs = Math.round(targetCal * 0.085);
                    fat = Math.round(targetCal * 0.027);
                }
            } else {
                if (day.type === 'Super') {
                    carbs = Math.round(targetCal * 0.125);
                    fat = Math.round(targetCal * 0.032);
                } else if (day.type === 'Low') {
                    carbs = Math.round(targetCal * 0.05);
                    fat = Math.round(targetCal * 0.033);
                } else if (day.type === 'High') {
                    carbs = Math.round(targetCal * 0.11);
                    fat = Math.round(targetCal * 0.019);
                } else {
                    carbs = Math.round(targetCal * 0.083);
                    fat = Math.round(targetCal * 0.026);
                }
            }

            if (beer > 0) {
                carbs = Math.round(carbs * 0.9);
                fat = Math.round(fat * 0.9);
            }

            const foodCal = (carbs * 4) + proteinCal + (fat * 9);
            const totalCal = foodCal + beer;

            weeklyFood += foodCal;
            weeklyBeer += beer;

            macros.push({
                day: day.name,
                type: day.type,
                carbs: carbs,
                protein: protein,
                fat: fat,
                foodCal: foodCal,
                beer: beer,
                total: totalCal
            });
        });

        const weeklyTotal = weeklyFood + weeklyBeer;
        const dailyAvg = Math.round(weeklyTotal / 7);
        const deficit = tdee - dailyAvg;
        const deficitPct = Math.round((deficit / tdee) * 100);
        const lbsPerWeek = ((deficit * 7) / 3500).toFixed(1);

        document.getElementById(phaseId + '-avg').textContent = dailyAvg.toLocaleString();
        
        if (phaseId === 'pr') {
            const diff = dailyAvg - tdee;
            const diffPct = ((diff / tdee) * 100).toFixed(1);
            document.getElementById('pr-diff').textContent =
                diff >= 0
                    ? `+${diff} cal/day (+${diffPct}%)`
                    : `${diff} cal/day (${diffPct}%)`;
        } else {
            document.getElementById(phaseId + '-deficit').textContent = deficit.toLocaleString();
            document.getElementById(phaseId + '-loss').textContent = lbsPerWeek;
            document.getElementById(phaseId + '-4wk').textContent = Math.round(lbsPerWeek * 4);
            document.getElementById(phaseId + '-6wk').textContent = Math.round(lbsPerWeek * 6);
        }

        const container = document.getElementById(phaseId + '-table');
        container.innerHTML = `
            <div style="margin-top:16px; display:flex; flex-direction:column; gap:8px;">
                ${macros.map(m => `
                    <div style="padding:10px 12px; border-radius:8px; border:1px solid var(--color-border); background: var(--color-surface);">
                        <div>
                            <strong>${m.day}</strong>
                            <span class="day-type day-${m.type.toLowerCase()}">${m.type}</span>
                        </div>
                        <div>
                            ${m.type} ‚Äì ${m.carbs}g C ¬∑ ${m.protein}g P ¬∑ ${m.fat}g F
                        </div>
                        <div>
                            ${m.foodCal.toLocaleString()} food cal${
                                m.beer > 0
                                    ? ` + ${m.beer} beer = ${m.total.toLocaleString()} total`
                                    : ` = ${m.total.toLocaleString()} total`
                            }
                        </div>
                    </div>
                `).join('')}
                <div style="margin-top:8px; padding:10px 12px; border-radius:8px; background: var(--color-border); font-weight:bold;">
                    Weekly: ${weeklyFood.toLocaleString()} food cal${
                        weeklyBeer > 0
                            ? ` + ${weeklyBeer.toLocaleString()} beer = ${weeklyTotal.toLocaleString()} total`
                            : ` = ${weeklyTotal.toLocaleString()} total`
                    }
                </div>
            </div>
        `;
    }
</script>

